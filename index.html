<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S√§rm√§ys Pro v3.8.6</title>
    <style>
        .version-tag { color: #ff8c00; font-weight: bold; padding: 10px; font-size: 0.8rem; }
        body { font-family: sans-serif; text-align: center; padding: 20px; background: #f0f2f5; }
        #tyoaika-display { font-family: monospace; font-size: 2.5rem; margin: 20px 0; color: #333; display: none; }
        #paa-nappi { width: 100%; padding: 20px; font-size: 1.2rem; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; }
        .btn-aloita { background: #28a745; color: white; }
        .btn-lopeta { background: #dc3545; color: white; }
    </style>
</head>
<body>
    <div class="version-tag">Versio 3.8.6 üü†</div>
    <div id="tyoaika-display">00:00:00</div>
    <button id="paa-nappi" class="btn-aloita" onclick="nappiaPainettu()">ALOITA TY√ñVUORO üöÄ</button>

<script>
    let aloitusAikaleima = null;
    let kelloInterval = null;

    function nappiaPainettu() {
        const nappi = document.getElementById('paa-nappi');
        const naytto = document.getElementById('tyoaika-display');
        
        if (!aloitusAikaleima) {
            let syote = prompt("Sy√∂t√§ aloitusaika (HH:MM) tai j√§t√§ tyhj√§ksi:", "");
            if (syote === null) return;

            let nyt = new Date();
            if (syote.trim() !== "") {
                let osat = syote.split(/[:.]/);
                if (osat.length >= 2) {
                    nyt.setHours(parseInt(osat[0]), parseInt(osat[1]), 0, 0);
                }
            }
            
            aloitusAikaleima = nyt.getTime();
            nappi.innerText = "LOPETA VUORO üèÅ";
            nappi.className = "btn-lopeta";
            naytto.style.display = "block";
            
            // K√§ynnistet√§√§n kello
            kelloInterval = setInterval(paivitaKello, 1000);
            paivitaKello(); // P√§ivitet√§√§n heti
        } else {
            if (confirm("Lopetetaanko vuoro?")) {
                clearInterval(kelloInterval);
                aloitusAikaleima = null;
                nappi.innerText = "ALOITA TY√ñVUORO üöÄ";
                nappi.className = "btn-aloita";
                naytto.style.display = "none";
            }
        }
    }

    function paivitaKello() {
        if (!aloitusAikaleima) return;
        let nyt = new Date().getTime();
        let erotus = Math.floor((nyt - aloitusAikaleima) / 1000);
        
        // Estet√§√§n negatiivinen aika, jos sy√∂tetty aika on tulevaisuudessa
        if (erotus < 0) erotus = 0;

        let h = Math.floor(erotus / 3600).toString().padStart(2, '0');
        let m = Math.floor((erotus % 3600) / 60).toString().padStart(2, '0');
        let s = (erotus % 60).toString().padStart(2, '0');
        
        document.getElementById('tyoaika-display').innerText = `${h}:${m}:${s}`;
    }
</script>
</body>
</html>
